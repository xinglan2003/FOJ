(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[764],{6791:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/problems/create",function(){return a(1895)}])},1895:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return CreateProblem}});var n=a(5893),u=a(7294),r=a(7066),l=a(1163);function CreateProblem(){let[e,t]=(0,u.useState)(""),[a,o]=(0,u.useState)(""),[i,p]=(0,u.useState)(1e3),[s,h]=(0,u.useState)(256),[d,c]=(0,u.useState)(""),[v,g]=(0,u.useState)([{input:"",output:""}]),m=(0,l.useRouter)(),handleSampleChange=(e,t,a)=>{let n=[...v];n[e][t]=a,g(n)},handleCreate=async t=>{t.preventDefault();let n=localStorage.getItem("token"),u=d.split(",").map(e=>e.trim());try{await r.Z.post("http://8.216.81.61:5000/api/problem",{title:e,description:a,timeLimit:i,memoryLimit:s,tags:u,samples:v},{headers:{Authorization:"Bearer ".concat(n)}}),alert("题目创建成功"),m.push("/problems")}catch(e){var l,o;alert((null===(o=e.response)||void 0===o?void 0:null===(l=o.data)||void 0===l?void 0:l.message)||"创建失败")}};return(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("h2",{children:"创建题目"}),(0,n.jsxs)("form",{onSubmit:handleCreate,children:[(0,n.jsx)("input",{type:"text",placeholder:"标题",value:e,onChange:e=>t(e.target.value),required:!0}),(0,n.jsx)("textarea",{placeholder:"题面描述",value:a,onChange:e=>o(e.target.value),required:!0}),(0,n.jsx)("input",{type:"number",placeholder:"时间限制 (ms)",value:i,onChange:e=>p(e.target.value),required:!0}),(0,n.jsx)("input",{type:"number",placeholder:"空间限制 (MB)",value:s,onChange:e=>h(e.target.value),required:!0}),(0,n.jsx)("input",{type:"text",placeholder:"标签（用逗号分隔）",value:d,onChange:e=>c(e.target.value)}),(0,n.jsx)("h3",{children:"样例"}),v.map((e,t)=>(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"text",placeholder:"输入",value:e.input,onChange:e=>handleSampleChange(t,"input",e.target.value),required:!0}),(0,n.jsx)("input",{type:"text",placeholder:"输出",value:e.output,onChange:e=>handleSampleChange(t,"output",e.target.value),required:!0})]},t)),(0,n.jsx)("button",{type:"button",onClick:()=>{g([...v,{input:"",output:""}])},children:"添加样例"}),(0,n.jsx)("button",{type:"submit",children:"创建"})]})]})}}},function(e){e.O(0,[66,774,888,179],function(){return e(e.s=6791)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1075:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return n(8910)}])},8910:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Dashboard}});var i=n(5893),s=n(7294),c=n(7066),r=n(1664),a=n.n(r);function Dashboard(){let[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)([]),[h,l]=(0,s.useState)([]),[o,d]=(0,s.useState)([]);(0,s.useEffect)(()=>{fetchUser(),fetchPosts(),fetchCompetitions(),fetchCourses()},[]);let fetchUser=async()=>{let e=localStorage.getItem("token");if(e)try{let n=await c.Z.get("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});t(n.data)}catch(e){console.error("获取用户信息失败",e)}},fetchPosts=async()=>{try{let e=await c.Z.get("/api/forum/posts");r(e.data)}catch(e){console.error("获取帖子失败",e)}},fetchCompetitions=async()=>{try{let e=await c.Z.get("/api/competition");l(e.data)}catch(e){console.error("获取比赛失败",e)}},fetchCourses=async()=>{try{let e=await c.Z.get("/api/training");d(e.data)}catch(e){console.error("获取课程失败",e)}};return e?(0,i.jsxs)("div",{className:"container",children:[(0,i.jsxs)("h2",{children:["欢迎, ",e.nickname,"!"]}),(0,i.jsxs)("section",{children:[(0,i.jsx)("h3",{children:"最新帖子"}),(0,i.jsx)("ul",{children:n.slice(0,5).map(e=>(0,i.jsxs)("li",{children:[(0,i.jsx)(a(),{href:"/forum/".concat(e.id),children:(0,i.jsx)("a",{children:e.title})}),(0,i.jsxs)("span",{children:[" by ",e.author.nickname]})]},e.id))}),(0,i.jsx)(a(),{href:"/forum",children:(0,i.jsx)("a",{children:"查看更多帖子"})})]}),(0,i.jsxs)("section",{children:[(0,i.jsx)("h3",{children:"最新比赛"}),(0,i.jsx)("ul",{children:h.slice(0,5).map(e=>(0,i.jsxs)("li",{children:[(0,i.jsx)(a(),{href:"/competitions/".concat(e.id),children:(0,i.jsx)("a",{children:e.name})}),(0,i.jsxs)("span",{children:[" - ",e.type," 赛制"]})]},e.id))}),(0,i.jsx)(a(),{href:"/competitions",children:(0,i.jsx)("a",{children:"查看更多比赛"})})]}),(0,i.jsxs)("section",{children:[(0,i.jsx)("h3",{children:"培训课程"}),(0,i.jsx)("ul",{children:o.slice(0,5).map(e=>(0,i.jsx)("li",{children:(0,i.jsx)(a(),{href:"/training/".concat(e.id),children:(0,i.jsx)("a",{children:e.title})})},e.id))}),(0,i.jsx)(a(),{href:"/training",children:(0,i.jsx)("a",{children:"查看更多课程"})})]})]}):(0,i.jsx)("div",{children:"加载中..."})}}},function(e){e.O(0,[66,664,774,888,179],function(){return e(e.s=1075)}),_N_E=e.O()}]);
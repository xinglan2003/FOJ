(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[739],{8023:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/training/[id]",function(){return t(5457)}])},5457:function(e,n,t){"use strict";let r;t.r(n),t.d(n,{default:function(){return TrainingRoom}});var i=t(5893),c=t(7294),o=t(1163),u=t(7642);function TrainingRoom(){let e=(0,o.useRouter)(),{id:n}=e.query,t=(0,c.useRef)(null),s=(0,c.useRef)(null);return(0,c.useEffect)(()=>{if(n)return r=(0,u.ZP)("http://8.216.81.61:5000"),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(e=>{t.current.srcObject=e,r.emit("join-room",n),r.on("user-connected",e=>{})}).catch(e=>console.error("获取媒体失败:",e)),()=>{r.disconnect()}},[n]),(0,i.jsxs)("div",{className:"container",children:[(0,i.jsxs)("h2",{children:["教室 ",n]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("video",{ref:t,autoPlay:!0,muted:!0}),(0,i.jsx)("video",{ref:s,autoPlay:!0})]}),(0,i.jsx)("button",{onClick:()=>{let e=t.current.srcObject,n=e.getAudioTracks()[0];n.enabled=!n.enabled},children:"切换麦克风"}),(0,i.jsx)("button",{onClick:()=>{let e=t.current.srcObject,n=e.getVideoTracks()[0];n.enabled=!n.enabled},children:"切换摄像头"})]})}}},function(e){e.O(0,[642,774,888,179],function(){return e(e.s=8023)}),_N_E=e.O()}]);